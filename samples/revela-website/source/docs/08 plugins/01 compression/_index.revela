+++
title = "Static Compression"
template = "docs"
+++

Revela can pre-compress your static files with **Gzip** and **Brotli** for faster loading.

> **Do you need this?** If you're using GitHub Pages, Netlify, Vercel, or Cloudflare Pages â€“ **no!** These platforms compress automatically. This plugin is for self-hosted servers, AWS S3, or basic web hosts.

<div class="features-grid">

### ğŸ“¦ Pre-Generated

Compressed files created at build time, not on every request.

### ğŸš€ 95% Smaller

HTML, CSS, and JS files compress dramatically with Brotli.

### âš¡ Zero CPU Cost

Servers deliver pre-compressed files instantly.

</div>

## Installation

```bash
revela plugin install Compress
```

## Usage

### Compress Your Site

```bash
# After generating your site
revela generate compress
```

> **Note:** Compression runs separately, not as part of `generate all`.
> Your server must be configured to serve pre-compressed files.

### Remove Compressed Files

```bash
revela clean compress
```

## What Gets Compressed?

| File Type | Typical Savings |
|-----------|-----------------|
| HTML | 70-85% |
| CSS | 75-90% |
| JavaScript | 65-80% |
| JSON | 70-85% |
| SVG | 50-70% |
| XML | 70-85% |

**Images are skipped** â€“ they're already optimized (AVIF, WebP, JPG).

## Output Structure

Your files remain unchanged. Compressed versions are added alongside:

```
output/
â”œâ”€â”€ index.html          â† Original (10 KB)
â”œâ”€â”€ index.html.gz       â† Gzip (2.5 KB)
â”œâ”€â”€ index.html.br       â† Brotli (2.1 KB)
â”œâ”€â”€ _assets/
â”‚   â”œâ”€â”€ main.css
â”‚   â”œâ”€â”€ main.css.gz
â”‚   â””â”€â”€ main.css.br
```

## Example Output

```
â•­â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Compression complete!              â”‚
â”‚                                    â”‚
â”‚ Summary:                           â”‚
â”‚   Files:    14                     â”‚
â”‚   Original: 1.22 MB                â”‚
â”‚                                    â”‚
â”‚ Compressed sizes:                  â”‚
â”‚   Gzip:    93.4 KB (92.5% savings) â”‚
â”‚   Brotli:  61.6 KB (95.1% savings) â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## When Do You Need This Plugin?

| Platform | Need Plugin? | Reason |
|----------|--------------|--------|
| GitHub Pages | âŒ No | Compresses automatically |
| Netlify | âŒ No | Compresses automatically |
| Vercel | âŒ No | Compresses automatically |
| Cloudflare Pages | âŒ No | Compresses automatically |
| AWS S3 + CloudFront | ğŸŸ¡ Optional | CloudFront compresses, but pre-compressed is faster |
| AWS S3 (direct) | âœ… Yes | No automatic compression |
| nginx | âœ… Yes | Use `gzip_static on` for pre-compressed files |
| Apache | âš™ï¸ Needs RewriteRule |

## Pipeline Order

Compression is **not** part of `revela generate all`. Run it separately after generating your site:

```bash
revela generate all
revela generate compress
```

This ensures all content exists before compressing.

## Compression Settings

The plugin uses **maximum compression** for smallest files:

| Format | Level | Browser Support |
|--------|-------|-----------------|
| Gzip | 9 (max) | All browsers |
| Brotli | 11 (max) | Modern browsers (95%+) |

Files under **256 bytes** are skipped â€“ compression overhead exceeds savings.
