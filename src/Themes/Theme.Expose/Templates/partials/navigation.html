{{~##
  Rekursives Navigation-Template - Expose Theme

  Type-Erkennung basiert auf Eigenschaften:
  - Column: !url && children.size > 0 (Section header ohne Link)
  - Branch: children.size > 0 (Hat Kinder, kann Link haben)
  - Leaf: children.size == 0 (Einfacher Link)

  Erwartet: nav_items (Array von NavigationItem)
  NavigationItem: { text, url?, active?, children }
##~}}

{{~ func render_item(item) ~}}
  {{~ if !item.url && item.children.size > 0 ~}}
    {{~ # Column: Section ohne Link ~}}
<section class="nav-section">
  <h3 class="nav-section-title">{{ item.text }}</h3>
  <ul class="nav-list">
  {{~ for child in item.children ~}}
    <li class="nav-item">{{ render_item child }}</li>
  {{~ end ~}}
  </ul>
</section>
  {{~ else if item.children.size > 0 ~}}
    {{~ # Branch: Hat Kinder (kann Link haben) ~}}
<div class="nav-branch">
  {{~ if item.url ~}}
  <a href="{{ basepath }}{{ item.url }}" class="nav-branch-title{{ item.active ? ' active' : '' }}">{{ item.text }}</a>
  {{~ else ~}}
  <span class="nav-branch-title">{{ item.text }}</span>
  {{~ end ~}}
  <div class="nav-branch-children">
  {{~ for child in item.children ~}}
  {{ render_item child }}
  {{~ end ~}}
  </div>
</div>
  {{~ else ~}}
    {{~ # Leaf: Einfacher Link ~}}
<a href="{{ basepath }}{{ item.url }}" class="nav-link{{ item.active ? ' active' : '' }}">{{ item.text }}</a>
  {{~ end ~}}
{{~ end ~}}

{{~ for item in nav_items ~}}
{{ render_item item }}
{{~ end ~}}
